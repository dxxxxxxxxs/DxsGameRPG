{"version":3,"sources":["assets/Scripts/Game/player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport Game from \"../../Common/Game\";\nimport IResultAble from \"../../Common/Pool/IResultAble\";\nimport GameModel from \"../Model/GameModel\";\nimport GameConst from \"../Src/GameConst\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class player extends IResultAble {\n\n    private canKeyDown: boolean = false;\n\n\n    protected onEnable(): void {\n        this.addEvent();\n    }\n    protected onDisable(): void {\n        this.removeEvent();\n    }\n    public onSpawn() {\n        console.log(\"玩家已生成\");\n    }\n    public unSpawn() {\n        console.log(\"玩家已死亡\");\n    }\n    addEvent() {\n        Game.Event.addEventListener(GameConst.UI_PlayerUp, this.onPlayerUp, this);\n    }\n    removeEvent() {\n        Game.Event.removeEventListener(GameConst.UI_PlayerUp, this.onPlayerUp, this);\n    }\n    //开始移动\n    protected update(dt: number): void {\n        if (this.node.active) {\n            if (this.node.y < -640) {\n                Game.Event.dispatch(GameConst.GAMEOVER);\n                return;\n            }\n            this.node.x += GameModel.moveSpeed * dt;\n            GameModel.distance += GameModel.moveSpeed * dt;\n            if (GameModel.distance >= 1200) {\n                Game.Event.dispatch(GameConst.UI_CreateMap);\n                GameModel.distance = 0;\n                GameModel.moveSpeed += 20;\n            }\n        }\n    }\n    //跳跃\n    onPlayerUp() {\n        if (this.canKeyDown == false) return;\n        let rigidbody2 = this.node.getComponent(cc.RigidBody);\n        rigidbody2.applyForceToCenter(cc.v2(0, 100).mulSelf(700), true);\n        this.canKeyDown = false;\n    }\n    onBeginContact(contact: cc.PhysicsContact, selfCollider: cc.PhysicsCircleCollider, otherCollider: cc.PhysicsBoxCollider) {\n        this.canKeyDown = true;\n    }\n    onEndContact(contact: cc.PhysicsContact, selfCollider: cc.PhysicsCircleCollider, otherCollider: cc.PhysicsBoxCollider) {\n        this.canKeyDown = false;\n    }\n    onCollisionEnter(other, self) {\n        if (other.tag == 9) {\n            Game.ObjectPool.UnSpawn(other.node);\n            Game.Event.dispatch(GameConst.GetCoin);\n        }\n    }\n}\n"]}