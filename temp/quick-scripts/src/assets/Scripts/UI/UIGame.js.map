{"version":3,"sources":["assets/Scripts/UI/UIGame.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport BundleManager from \"../../Common/Bundle/BundleManager\";\nimport Game from \"../../Common/Game\";\nimport GameModel from \"../Model/GameModel\";\nimport GameConst from \"../Src/GameConst\";\n\nconst { ccclass, property } = cc._decorator;\n\nexport enum GameState {\n    null,\n    game,\n    pause,\n    over,\n}\n@ccclass\nexport default class UIGame extends cc.Component {\n    @property(cc.Camera)\n    camera: cc.Camera = null;\n    @property(cc.Label)\n    score: cc.Label = null;\n    protected onEnable(): void {\n        this.addEvent();\n        this.initPlayer();\n        this.initCoin();\n\n    }\n    async initPlayer() {\n        try {\n            let player = await Game.ObjectPool.Spawn(\"player\", this.node);\n            player.setPosition(0, 0);\n        } catch (error) {\n            console.log(error);\n        }\n    }\n    async initCoin() {\n        try {\n            for (let i = 0; i < 100; i++) {\n                let coin = await Game.ObjectPool.Spawn(\"Coin\", this.node);\n                coin.setPosition(i * 100, i * 5)\n            }\n        } catch (error) {\n            console.log(error);\n        }\n    }\n    protected onDisable(): void {\n        this.removeEvent();\n    }\n    protected update(dt: number): void {\n        if (GameModel.gameState == GameState.game) {\n            this.camera.node.x += GameModel.moveSpeed * dt;\n            this.node.getChildByName(\"Bg\").x += GameModel.moveSpeed * dt;\n        }\n    }\n    addEvent() {\n        Game.Event.addEventListener(GameConst.UI_GameOver, this.gameOver, this);\n        Game.Event.addEventListener(GameConst.UI_GetCoin, this.UIGetCoin, this);\n        //Game.Event.addEventListener(GameConst.UI_GameStart, this.gameStart, this);\n    }\n    removeEvent() {\n        Game.Event.removeEventListener(GameConst.UI_GameOver, this.gameOver, this);\n        Game.Event.removeEventListener(GameConst.UI_GetCoin, this.UIGetCoin, this);\n        //Game.Event.removeEventListener(GameConst.UI_GameStart, this.gameStart, this);\n    }\n    UIGetCoin() {\n        this.score.string = GameModel.gameScore.toString();\n    }\n\n    async gameOver() {\n        let over = await Game.ObjectPool.Spawn(\"UIGameOver\", this.camera.node);\n        over.setPosition(0, 0, -1);\n        console.log(over.getPosition());\n        this.node.active = false;\n    }\n}\n"]}