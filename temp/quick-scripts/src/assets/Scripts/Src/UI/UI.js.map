{"version":3,"sources":["assets/Scripts/Src/UI/UI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport AudioRoot from \"../../Framework/Audio/AudioRoot\";\nimport BundleManager from \"../../Framework/Bundle/BundleManager\";\nimport Game from \"../../Framework/Game\";\nimport CCTools from \"../../Framework/Tools/CCTools\";\nimport GameConst from \"../GameConst\";\nimport GameModel from \"../Model/GameModel\";\nimport { RWInfo } from \"../Model/RWInfo\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class UI extends cc.Component {\n    onLoad () {\n        this.addEvent();\n        this.initUI();\n        this.initBundle();\n    }\n    public async initBundle()\n    {\n        let audioNode=new cc.Node();\n        audioNode.addComponent(cc.AudioSource);\n        audioNode.addComponent(AudioRoot);\n        //await BundleManager.loadBundle(\"Prefab\");\n        await BundleManager.loadBundle(\"Audio\");\n        await BundleManager.loadBundle(\"ObjectPool\");\n        let share=await Game.ObjectPool.Spawn(\"share\",this.node);\n        share.setPosition(360,640);\n        this.scheduleOnce(()=>{\n            Game.ObjectPool.UnSpawn(share);\n        },3)\n        // let Prefab=await BundleManager.load<cc.Prefab>(\"GameRWPanel\",\"Prefab\");\n        // let node=cc.instantiate(Prefab);\n        // node.setParent(cc.director.getScene());\n        \n    }\n    addEvent()\n    {\n        Game.Event.addEventListener(GameConst.UI_GameOver,this.GameOver,this);\n    }\n    removeEvent()\n    {\n        Game.Event.removeEventListener(GameConst.UI_GameOver,this.GameOver,this);\n    }\n    GameStart()\n    {\n        this.node.getChildByName(\"Canvas\").getChildByName(\"GameStartPanel\").active=false;\n        Game.Event.dispatch(GameConst.GameStart);\n    }\n    GameOver()\n    {\n        this.node.getChildByName(\"Canvas\").getChildByName(\"GameOverPanel\").active=true;\n    }\n    initUI()\n    {\n        this.updateUI();\n        this.initRWInfos();\n    }\n    initRWInfos()\n    {\n        let money=100;\n        for(let i=0;i<10;i++)\n        {\n            let state=Math.floor(Math.random()*2);\n            let rw=new RWInfo(state,null,0.2,\"任务\"+i,money);\n            GameModel.RWInfos.push(rw);\n            money+=100;\n        }\n    }\n    updateRWInfos()\n    {\n\n    }\n    updateUI()\n    {\n        this.updateMusic();\n    }\n    updateMusic()\n    {\n        console.log(\"改变静音\");\n        Game.Event.dispatch(GameConst.UI_UpdateMusic);\n        this.node.getChildByName(\"Canvas\").getChildByName(\"GameStartPanel\").getChildByName(\"btnMusic\").getChildByName(\"btnMusicOn\").active=GameModel.isMusic;\n        this.node.getChildByName(\"Canvas\").getChildByName(\"GameStartPanel\").getChildByName(\"btnMusic\").getChildByName(\"btnMusicOff\").active=!GameModel.isMusic;\n    }\n    InputEmailEnter()\n    {\n        let string:string=this.node.getChildByName(\"Canvas\").getChildByName(\"GameStartPanel\").getChildByName(\"InputEmail\").getComponent(cc.EditBox).string;\n        if(CCTools.isValidEmail(string))\n        {\n            console.log(\"发送邮件成功\");\n        }\n        else\n        {\n            this.node.getChildByName(\"Canvas\").getChildByName(\"GameStartPanel\").getChildByName(\"InputEmail\").getComponent(cc.EditBox).string=\"\";\n            console.log(\"错误邮箱格式\");\n        }\n    }\n    protected onDestroy(): void {\n        this.removeEvent();\n    }\n}\n\n"]}